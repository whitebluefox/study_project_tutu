<p id="notice"><%= notice %></p>

<p>
  <strong>Номер поезда:</strong>
  <%= @train.number %>
</p>
<p>
	<strong>Вагоны поезда:</strong>
	<% if @train.wagons.present? %>
		<p>Купейных вагонов</p>
		<%= @train.wagons.compartment.count %>
			<p>Мест верхних:</p>
				<% top_count = @train.wagons.compartment.map do |wagon| %>
				  <% wagon.top_seat.to_i %>
				<% end %> 
			<%= top_count.sum %> 
			<p>Мест нижних:</p>
				<% bottom_count = @train.wagons.compartment.map do |wagon| %>
				  <% wagon.bottom_seat.to_i %>
				<% end %> 
			<%= bottom_count.sum %>  
		<p>Плацкартных вагонов</p>
		<%= @train.wagons.econom.count %>
			<p>Мест верхних:</p>
				<% top_count = @train.wagons.econom.map do |wagon| %>
				  <% wagon.top_seat.to_i %>
				<% end %> 
			<%= top_count.sum %> 
			<p>Мест нижних:</p>
				<% bottom_count = @train.wagons.econom.map do |wagon| %>
				  <% wagon.bottom_seat.to_i %>
				<% end %> 
			<%= bottom_count.sum %> 		
	<% else %>
		У этого поезда ещё нет вагонов
	<% end %>		
</p>
<p>
	<strong>Маршрут:</strong>
	<% if @train.route.present? %>
		<%= @train.route.title %>
	<% else %>
		Маршрут не назначен
	<% end %>		
</p>
<p>
	<strong>На станции:</strong>
	<% if @train.current_station.present? %>
		<%= @train.current_station.title %>
	<% else %>
		Не указано
	<% end %>		
</p>

<%= link_to 'Редактировать', edit_train_path(@train) %> |
<%= link_to 'Назад', trains_path %>
